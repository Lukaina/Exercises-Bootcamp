<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width,initial-scale=1.0">
  <link rel="icon" type="icon" href="icon.png" />
  <title>Promises</title>
</head>

<body>

  <script>

    // Asincronismo: en qu√© momento pasa cada cosa. S√≥lo puedo correr una cosa a la vez en JS. Cuando quiera que unas tareas se ejecuten, sean llamadas.
    // Promesa: Guarda el resultado de una operaci√≥n asincrona. Ejemplo: Timers, que se ejecutar√°n en el futuro.  

    // console.log('Hola');
    // setTimeout(function() {
    //     console.log('C√≥mo est√°s?');
    // } , 2000);
    // console.log('Adi√≥s');
    
    //Pedido en espera: PROMESA DE UNA PIZZA. Las promesas se resuelven cuando est√©n listas.
    function orderPizza(flavor) {
      const pizzaPromise = new Promise(function(resolve, reject){
        //Esperar que hagan la pizza.
        setTimeout(function(){
            //Cuando est√© lista la pizza(resolver la promesa)
        resolve(`Aqu√≠ tienes tu pizza de ${flavor} üçï`);
        }, 2000);
      
        //Si pasa algo con el pedido(rechazar la promesa)

      });
      return pizzaPromise;
    }
    
    // const champi√±onespizza = orderPizza('champi√±ones');
    // const cheeseveganpizza = orderPizza('cheese vegan');
    // // console.log(champi√±onespizza);
    // // console.log(cheeseveganpizza);

    // //Resolver la promesa:
    // champi√±onespizza.then(function(pizza) {
    //   console.log(pizza);
    //   console.log('Recibido');
    // });

    //Anidar varias promesas:
    // orderPizza('cheesevegan')
    //   .then(function(pizza){
    //     console.log(pizza);
    //     return orderPizza('BBQ');//Promesa
    //   })
    //   .then(function(pizza){
    //     console.log(pizza);
    //     return orderPizza('Margarita');//Promesa
    //   })
    //   .then(function(pizza){
    //     console.log(pizza);
    //   });

    //Resolver varias promesas al mismo tiempo:
    const pizza1 = orderPizza('cheesevegan');
    const pizza2 = orderPizza('champi√±ones');
    const pizza3 = orderPizza('BBQ');

    const megaOrder = Promise.all([pizza1, pizza2, pizza3]);

    //Para resolver esa promesa:
    megaOrder.then(function(pizzas) {
      console.log(pizzas);
    });
    
    //EJERCICIO!!!
    async function Order(){ 
      console.log('Pedir pizza vegana.');
      const pizza = await orderPizza('Champi√±ones'); 
      console.log(pizza);
    }
    
    Order();

      //-----

    // async function Order(){ 
    //   console.log('Pedir pizza vegana.');
    //   const pizza = await orderPizza('CheeseVegan'); 
    //   console.log(pizza);
    // }
    
    // Order();

    //-----

    // async function Order(){ 
    //   console.log('Pedir pizza vegana.');
    //   const pizza = await orderPizza('BBQ'); 
    //   console.log(pizza);
    // }
    
    // Order();

  </script>
</body>

</html>

